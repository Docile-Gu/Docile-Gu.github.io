---
layout: post
title: "【学习笔记】模拟退火"
date: 2019-8-21
excerpt: "大步小步走出过往"
tags: [Notes]
comments: false
---

# 首先感谢巨佬FlashHu的博客，在他的博客下我学会了模拟退火，挂个链接OvO[教科书OvO](https://www.cnblogs.com/flashhu/p/8884132.html),我这个顶多算记在书上的笔记OvO

# 算法简述

### 模拟退火适用于一些求最优解的问题

### 把问题抽象看成一个毫无规律的函数，而最优解就是函数的最低点

# 实现过程

## 几个参数

### T---温度

### ΔT---温度变化率，每次的温度乘上ΔT，实际一般取上0.95-0.99，模拟徐徐降温

### x--- 当前选择的解

### Δx--- 解变动值

### x1---当前的目标解，等于x + Δx

### Δf--- 当前解的函数值于目标解函数值的差，等于f(x)- f(x1)

### 我们给定一个初始解x，并且让他不断变动，要模拟变动的大小随温度降低而降低，我们每次的Δx应该在一个大小与T成正比的值域内随机取值

### 这时候我们要考虑是否将当前解换成目标解，还需要贪心一下，如果f(x1) < f(x),就接受目标解 x = x1

### 当然，如果f(x1) > f(x),就以一定的概率接受它，这样才能跳出局部的限制，去搜寻最优解，最优解大概是e·Δf/T

-----

### 给自己科普一下e：e是自然对数的底数，是个无限不循环的小数，值大概就是2.71828

-----

### 如此反复选择知道T趋近于0，用一个图来举例

### ![](https://images2018.cnblogs.com/blog/1309909/201804/1309909-20180420224735133-1941043057.png)

### 首先经过大幅度波动，当前解有A->B->C,找到了一个局部最优解（贪心），但是我们求的是全局最优解，还不能满足，由于温度（毕竟是模拟退火啊OvO）C->D->E温度上升上去，接着慢慢减小，当发现F时跳出了

### 某大佬:跳出了那个非常宽的局部凹函数

### 这时候发现温度已经越来月销量，很难接受比当前解F更优的目标解，温度再次下降，最终到达了G，找到了最优解

### 总结一下，基于随机的模拟退火能很大程度上提高正确率，但也不可能完全正确（毕竟是随机搜索嘛OwO），所以要多跑几遍，取每次得到的解的最优值

-------
下面就是直接搬过来的

关于参数
众所周知，模拟退火最麻烦的地方在调参，只有合适的参数才能在一定的时间内很大概率跑出最优解。

蒟蒻的经验暂时还不足呢qwq，不过也随便谈谈吧。

首先，根据数据范围和精度要求，可以基本确定EPS的大小了，不过也需要尝试手动微调。

比较麻烦的是温度和变动率。首先不必顾虑，都开大一点，先把最优解跑出来。

然后，~~手动二分~~吧，注意每个二分的值要多跑几遍，因为模拟退火有偶然性，一次跑出最优解不代表大部分时候都能。

不过因为有两个量，还不能直接二分，应该二分套二分比较合适

update:考试的时候写提答，总结了一种方法：观察法

一边退火一边输出当前的温度、解等信息，通过观察大致感受一下解的降低速率

一般来说，如果解的降低速率比较均匀，跑出来的最优解也就好一些

不均匀的话，就调整参数，将解的降低速率较快的时间段的ΔT变大一点，速率就能减慢一点。反之同理。

# 最后仍要感谢Flash_Hu大佬

# 大步小步走出过往

### By:Inea-----2019/08/21 

### 写于暑假集训的最后一天